/* Responsive gallery rules: auto-fit columns and orientation-aware aspect ratio */
#gallery-scroll .gallery-grid {
  display: grid;
  /* Use a responsive minimum column width so very small phones don't introduce horizontal overflow */
  grid-template-columns: repeat(auto-fit, minmax(clamp(140px, 30vw, 220px), 1fr));
  gap: 1.5rem; /* matches Tailwind gap-6 */
  grid-auto-flow: row dense;
  /* ensure consistent row sizing to avoid collapsed/uneven grid gaps */
  grid-auto-rows: 1fr;
}

/* make items stretch so each cell keeps the intended height */
#gallery-scroll .gallery-item {
  display: flex;
  align-items: stretch;
}
#gallery-scroll .gallery-item > .gallery-card {
  display: flex;
  flex-direction: column;
}

/* Default card aspect ratio (portrait-friendly) */
#gallery-scroll .gallery-card {
  aspect-ratio: 4 / 5;
  content-visibility: auto;
  contain: layout paint style;
  contain-intrinsic-size: 320px 400px;
}

/* Landscape devices: wider cards */
@media (orientation: landscape) {
  #gallery-scroll .gallery-card {
    aspect-ratio: 16 / 9;
  }
}

/* Removed: handled by the 650px small-screen rules which allow natural heights */

/* Smooth image fade when loaded (applies if image becomes visible)
   Images are controlled inline; use opacity transition when loaded via the img onLoad style if desired. */
#gallery-scroll .gallery-card img {
  transition: opacity 260ms ease, transform 420ms ease;
  opacity: 1;
  width: 100%;
  height: auto; /* default to natural height unless larger screens require fill */
  display: block;
  object-fit: cover; /* covers for larger cards */
}

@media (min-width: 651px) {
  /* On wider viewports let the image fill the card and crop to fit */
  #gallery-scroll .gallery-card img {
    height: 100%;
    object-fit: cover;
  }
}

/* Use a masonry-like layout on smaller screens so mixed portrait/landscape
   cards stack without leaving gaps. Placed after defaults to override them. */
@media (max-width: 900px) {
  #gallery-scroll .gallery-grid {
    display: block;
    column-count: 2;
    column-gap: 0.75rem;
  }

  #gallery-scroll .gallery-item {
    display: inline-block;
    width: 100%;
    break-inside: avoid;
    margin-bottom: 0.75rem;
  }

  /* Remove fixed aspect-ratio so card height follows the image */
  #gallery-scroll .gallery-card {
    aspect-ratio: auto !important;
    border-radius: 1rem;
    overflow: hidden;
    contain-intrinsic-size: 0 0 !important;
    contain: paint style !important;
    min-height: 0;
  }

  /* Make the internal wrapper flow naturally and let images determine height */
  #gallery-scroll .gallery-card .relative.w-full.h-full {
    height: auto !important;
    position: relative;
  }

  /* Turn the blurred LQIP into a normal block (not absolutely positioned) so
     it contributes to flow and prevents zero-height placeholders */
  #gallery-scroll .gallery-card .relative > .absolute.inset-0 {
    position: relative;
    height: auto;
    background-size: cover;
    background-position: center;
    filter: blur(6px);
  }

  /* Images should be full-width, natural height */
  #gallery-scroll .gallery-card picture,
  #gallery-scroll .gallery-card img {
    display: block;
    width: 100%;
    height: auto !important;
    object-fit: contain !important; /* keep the whole photo visible */
  }
}

@media (max-width: 650px) {
  #gallery-scroll .gallery-grid {
    column-count: 1;
  }
}
#gallery-scroll {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}
#gallery-scroll .cinematic-hero {
  position: relative;
  width: calc(100% + 2rem);
  margin: 0 -1rem 1.5rem;
  border-radius: 1.5rem;
  overflow: hidden;
  min-height: 48vh;
  background: #090a0c;
}
#gallery-scroll .cinematic-hero picture,
#gallery-scroll .cinematic-hero img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
#gallery-scroll .cinematic-hero-image {
  transform: scale(1.02);
  filter: saturate(0.95) contrast(1.06);
}
#gallery-scroll .cinematic-hero-vignette {
  position: absolute;
  inset: 0;
  background: radial-gradient(70% 80% at 50% 30%, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 75%, rgba(0, 0, 0, 0.85) 100%);
  pointer-events: none;
}
#gallery-scroll .cinematic-hero-leak {
  position: absolute;
  inset: -10% 0 0;
  background: radial-gradient(50% 40% at 15% 20%, rgba(20, 184, 166, 0.35), rgba(0, 0, 0, 0) 70%),
    radial-gradient(40% 30% at 85% 15%, rgba(245, 158, 11, 0.25), rgba(0, 0, 0, 0) 70%);
  mix-blend-mode: screen;
  opacity: 0.8;
  animation: lightLeak 8s ease-in-out infinite;
  pointer-events: none;
}
#gallery-scroll .cinematic-hero-grain {
  position: absolute;
  inset: 0;
  background-image: radial-gradient(rgba(255, 255, 255, 0.06) 1px, transparent 1px);
  background-size: 3px 3px;
  mix-blend-mode: soft-light;
  opacity: 0.2;
  pointer-events: none;
}

#gallery-scroll .cinematic-reveal .gallery-item {
  opacity: 0;
  transform: translateY(18px);
  filter: blur(8px);
  animation: galleryReveal 680ms ease forwards;
  animation-delay: calc(var(--reveal-index, 0) * 70ms);
}

@keyframes galleryReveal {
  to {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

@keyframes lightLeak {
  0%, 100% {
    transform: translate3d(0, 0, 0) scale(1);
    opacity: 0.7;
  }
  50% {
    transform: translate3d(1%, -1%, 0) scale(1.03);
    opacity: 0.95;
  }
}

.breathing-title {
  animation: breatheText 9s ease-in-out infinite;
}

.breathing-subtitle {
  animation: breatheTextSoft 9s ease-in-out infinite;
}

@keyframes breatheText {
  0%, 100% {
    opacity: 0.85;
  }
  50% {
    opacity: 1;
  }
}

@keyframes breatheTextSoft {
  0%, 100% {
    opacity: 0.65;
  }
  50% {
    opacity: 0.95;
  }
}

@media (min-width: 768px) {
  #gallery-scroll .cinematic-hero {
    width: 100%;
    margin: 0 0 2rem;
    min-height: 52vh;
    border-radius: 2rem;
  }
}

@media (prefers-reduced-motion: reduce) {
  #gallery-scroll .cinematic-hero-leak,
  #gallery-scroll .cinematic-reveal .gallery-item,
  .breathing-title,
  .breathing-subtitle {
    animation: none;
  }
  #gallery-scroll .cinematic-reveal .gallery-item {
    opacity: 1;
    transform: none;
    filter: none;
  }
}
#gallery-scroll .gallery-card .loading-placeholder {
  background: linear-gradient(180deg, #111217 0%, #0f1113 100%);
  background-size: cover;
  background-position: center;
  filter: blur(6px);
}

